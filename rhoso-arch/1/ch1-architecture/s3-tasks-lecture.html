<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Administrator Tasks and Tools :: Red Hat OpenStack Services on OpenShift Architecture</title>
    <link rel="prev" href="s2-components-quiz-answers.html">
    <link rel="next" href="s4-tasks-quiz.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Red Hat OpenStack Services on OpenShift Architecture</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/rhoso-arch/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoso-arch" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat OpenStack Services on OpenShift Architecture</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Architecture of Red Hat OpenStack Services on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="s1-components-lecture.html">Components of Red Hat OpenStack on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="s2-components-quiz.html">Quiz: Components of Red Hat OpenStack on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="s2-components-quiz-answers.html">Answers to the Quiz</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="s3-tasks-lecture.html">OpenStack Administrator Tasks and Tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="s4-tasks-quiz.html">Quiz: OpenStack Administrator Tasks and Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="s4-tasks-quiz-answers.html">Answers to the Quiz</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="s5-openshift-demo.html">Demo: OpenShift Web Console and Client</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat OpenStack Services on OpenShift Architecture</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat OpenStack Services on OpenShift Architecture</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat OpenStack Services on OpenShift Architecture</a></li>
    <li><a href="index.html">Architecture of Red Hat OpenStack Services on OpenShift</a></li>
    <li><a href="s3-tasks-lecture.html">OpenStack Administrator Tasks and Tools</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">OpenStack Administrator Tasks and Tools</h1>
<div id="preamble">
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Objective</dt>
<dd>
<p>Describe the role and typical tasks performed by Red Hat OpenStack Administration personnel, how they interact with other IT Operations roles, and the tools they use.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Work In Progress
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openstack_administrator_tasks"><a class="anchor" href="#_openstack_administrator_tasks"></a>OpenStack Administrator Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An OpenStack Administrator concerns with the OpenStack cluster itself, instead of with the workloads running on the cluster. OpenStack Administrators deal with the security, reliability, and performance of an OpenStack cluster control plane and its compute nodes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/s3-tasks-lecture-fig-1.png" alt="s3 tasks lecture fig 1">
</div>
</div>
<div class="paragraph">
<p>To manage OpenStack services and an OpenStack cluster control plane, an OpenStack Administrator using Red Hat OpenStack Services on OpenShift must use OpenShift tools and needs to understand Kubernetes API resources.</p>
</div>
<div class="paragraph">
<p>If you were used to manage OpenStack cluster control planes running directly on RHEL, on either physical servers or virtual machines, you would configure its OpenStack services at the control plane host operating system level, by making edits to configuration files over SSH sessions, and using RHEL commands to manage systemd units, file systems, and devices. All those settings now belong to custom resources from the OpenStack add-on operator, and you must manage them using Kubernetes APIs.</p>
</div>
<div class="paragraph">
<p>OpenStack compute nodes are still RHEL servers which you could manage directly using SSH sessions and host operating system commands. But these RHEL servers are also managed by the OpenStack External Data Plane Operator, which run Ansible playbooks on OpenShift. As an OpenStack Administrator, you should use these playbooks and manage them using custom resources from the OpenStack add-on operator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openstack_administrator_tools"><a class="anchor" href="#_openstack_administrator_tools"></a>OpenStack Administrator Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When working as an OpenShift Operator, to manage OpenStack services which run as containerized workloads on OpenShift, an OpenStack Administrator uses the following tools:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The OpenShift client</dt>
<dd>
<p>It is a command line tool which native ports for Linux, MacOS, and Windows. The <strong>oc</strong> command is an extension of the standard Kubernetes client <strong>kubectl</strong> which adds helpers for interacting with OpenShift addtitions, such as the OAuth server and projects.</p>
</dd>
<dt class="hdlist1">The OpenShift web console</dt>
<dd>
<p>It is a web application which offers functionality for OpenShift Administrators, OpenShift Operators, and application developers. Besides the standard set of pages from the OpenShift web console, add-on operators may add custom pages and monitoring dashboards.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The OpenShift web console is richer, compared to the OpenStack Horizon web UI, to the point you can expect to be able to perform almost all OpenShift operations and administration tasks using it. But OpenShift Operators are also expected to be adept of GitOps practices, which require managing Kubernetes API resources directly from code, using YAML files and the OpenShift client.</p>
</div>
<div class="paragraph">
<p>OpenStack Administrators also use the same tools OpenStack Operator uses, because some OpenStack administration tasks require managing OpenStack API resources such as provider networks and server flavors. These tasks are performed using the OpenStack client and Horizon. But, when OpenStack Administrators need to inspect or change the configuration of an OpenStack service, they must use Kubernetes APIs thus they must use OpenShift tools.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_openshift_client"><a class="anchor" href="#_using_the_openshift_client"></a>Using The OpenShift Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OpenShift client <code>oc</code> offers two sets of commands with full compatibility with the Kubernetes client <code>kubectl</code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generic operations on API resource types and instances. Those commands work with the same syntax for any API resource type and support declarative style API resource management.</p>
</li>
<li>
<p>Helper commands which perform common operations on specific API resource types. Most of these commands are alternatives to the generic commands and support an imperative style of API resource management.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The OpenShift client <code>oc</code> adds commands (and sometimes subcommands) to the comand set from <code>kubectl</code>. These additional commands are either helpers for custom resources from OpenShift or helpers from other OpenShift features, such as its internal OAuth server.</p>
</div>
<div class="sect2">
<h3 id="_general_syntax_of_openshift_client_commands"><a class="anchor" href="#_general_syntax_of_openshift_client_commands"></a>General Syntax of OpenShift Client Commands</h3>
<div class="paragraph">
<p>Follows the general syntax of the <code>oc</code> command. The dollar sign ($) represents an operating system shell prompt and is not part of the command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc</strong> [<em>global options</em>] <em>command</em> [<em>subcommand</em>] [<em>arguments</em>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Many OpenShift client commands follow a hierarchical structure where a command may define subcommands, subcommands may define their own subcommands, and so on, leading to multi-word commands. Sometimes a subcommand is not required at all, for example all of the following would be valid <code>create</code> commands after you add their required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>create</code></p>
</li>
<li>
<p><code>create job</code></p>
</li>
<li>
<p><code>create secret generic</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most OpenShift client commands require, as arguments, either the name of an API resource type or an API resource instance. Sometimes a resource instance must be named together with its namespace, as a single argument: <code><em>type/resource</em></code>. Other times, the API resourse type and instance name must be provided as different arguments: <code><em>type resource</em></code>. Some commands may accept both formats and some will require one of them.</p>
</div>
<div class="paragraph">
<p>Some commands can take the resource instance name from a YAML file and many commands require either a partial or a complete resource definition in an YAML file.</p>
</div>
<div class="paragraph">
<p>Sometimes a command argument may look similar to a subcommand, especially when the name of an API resource type is used as the name of a subcommand. In the following examples, <code>job</code> is a subcommand of the <code>create</code> command but an argument of the <code>get</code> command.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>create job</code></p>
</li>
<li>
<p><code>get job</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OpenShift client commands which require additional arguments beyond resource type or instance names usually take those arguments as GNU GetOpts options, which make them look like global options. A global option must come before the command, and a command argument must come after the command words, but the order of arguments doesn&#8217;t matter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_generic_commands_to_manipulate_kubernetes_api_resources"><a class="anchor" href="#_generic_commands_to_manipulate_kubernetes_api_resources"></a>Generic Commands to Manipulate Kubernetes API Resources</h3>
<div class="paragraph">
<p>The simplest of OpenShift client commands provide the basic operations of creating, editing, deleting, and retrieving Kubernetes API resource instances of any kind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>create</code></p>
</li>
<li>
<p><code>edit</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>get</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>get</code> command can either retrieve an API resource instance or list all instances of an API resource type in an OpenShift cluster.</p>
</div>
<div class="paragraph">
<p>Multiple commands may perform similar operations, for example all: of the following commands make changes to Kubernetes API resource instances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>edit</code></p>
</li>
<li>
<p><code>apply</code></p>
</li>
<li>
<p><code>patch</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>edit</code> command retrieves a resource instance and starts a local text editor, them replaces the resource instance in an OpenShift cluster with the definition from the text editor; The <code>apply</code> command replaces a resource instance with the complete definition in the YAML file; and finally, the <code>patch</code> merges the partial resource definition from the YAML file with the resource instance in an OpenShift cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_helper_commands_for_specific_kubernetes_api_resources"><a class="anchor" href="#_helper_commands_for_specific_kubernetes_api_resources"></a>Helper Commands for Specific Kubernetes API Resources</h3>
<div class="paragraph">
<p>As examples of helper commands from the OpenShift client, the <code>create</code> command accepts subcommands for a few Kubernetes API resource types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The examples in this section are not supposed to be complete command examples you could try. They are partial examples of the command syntax of the OpenShift client.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These following commands create API resource instances with minimal required attributes which may not be good enough for production usage but enable quick experimentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>create namespace</code></p>
</li>
<li>
<p><code>create job</code></p>
</li>
<li>
<p><code>create secret generic</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Another example of helper command is the <code>set</code> command, which can set a subset of attributes from pods and workload controllers such as jobs and deployments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>set env</code></p>
</li>
<li>
<p><code>set probe</code></p>
</li>
<li>
<p><code>set resources</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Later in this course we will learn about pods and workload controllers. They are API resources that manage containers running on Kubernetes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_openshift_client_examples"><a class="anchor" href="#_openshift_client_examples"></a>OpenShift Client Examples</h3>
<div class="paragraph">
<p>Very few of the OpenShift client commands work with no arguments. Here are a couple examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc project</strong>
$ <strong>oc whoami</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>Follows examples of generic API resource management comands which the name of an API resource type, API resource instance, or a YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc create -f <em>file.yaml</em></strong>
$ <strong>oc edit deployment <em>mywebapp</em></strong>
$ <strong>oc delete svc <em>mywebapp</em></strong>
$ <strong>oc get deployment <em>mywebapp</em></strong>
$ <strong>oc get svc</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the previous examples, <code>deployment</code> and <code>svc</code> are API resource types; <code><em>mywebapp</em></code> is an API resource name; and <code><em>file.yaml</em></code> is a file name.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not try these commands on your OpenShift cluster, unless you know which resource names to use and appropriate values for other arguments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And now some examples using helper commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc create secret generic ca-cert --from-file <em>ca.crt</em></strong>
$ <strong>oc set env deployment <em>mywebapp</em> <em>DATABASE=pages</em></strong>
$ <strong>oc set limit deployment/<em>mywebapp</em> --limits memory=<em>512Ki</em> --requests memory=<em>256Ki</em></strong>
$ <strong>oc set probe deployment/<em>mywebapp</em> --startup --get-url <em>http://:8080/healthz</em></strong>
$ <strong>oc expose svc <em>mywebapp</em></strong></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_online_help_from_the_openshift_client"><a class="anchor" href="#_online_help_from_the_openshift_client"></a>Online Help From the OpenShift Client</h3>
<div class="paragraph">
<p>The OpenShift client shows the first level of commands as the output of the <code>help</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc help</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>To see subcommands from the second, third, and so on command levels, you must use the <code>--help</code> option with a first-level command, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc create --help</strong>
$ <strong>oc create job --help</strong>
$ <strong>oc create secret --help</strong>
$ <strong>oc create secret generic --help</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--help</code> option also displays the arguments and options for a command, if that command requires no subcommands:</p>
</div>
</div>
<div class="sect2">
<h3 id="_introspection_of_api_resources"><a class="anchor" href="#_introspection_of_api_resources"></a>Introspection of API Resources</h3>
<div class="paragraph">
<p>An OpenShift cluster can list all available API resource types, be they standard Kubernetes API resources or custom resources from add-on operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc api-resources</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>That list can be quite large, but you can filter it by API group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc api-resources --api-group route.openshift.io</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>All Kubernetes API resource types have a composed name, which when fully qualified includes the API resource type, the API resource group, and the API version:</p>
</div>
<div class="paragraph">
<p><code>name.group/version</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p><code>route.route.openshift.io/v1</code></p>
</div>
<div class="paragraph">
<p>If there are no other API resource types with the same name, you can ommit the API resource group, so the following two commands list instances of the same API resource type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc get route</strong>
$ <strong>oc get route.route.openshift.io</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that, when listing or referring to API resource instances you <strong>must</strong> ommit the API version.</p>
</div>
<div class="paragraph">
<p>The output of the <code>oc api-resources</code> command also shows that some API resource types have short names, which can save a bit of typing. For example, the following two commands lis the same API resource instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc get service</strong>
$ <strong>oc get svc</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>And most API resource types accept a plural form, so the following two commands again list the same API resource instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc get service</strong>
$ <strong>oc get services</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you find the name of the API resource type you need, you can retrieve a description of its purposes and attributes. But, if you need to include the API group, because the same resource type exists in multiple groups, you also need to include the API version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ <strong>oc explain route</strong>
$ <strong>oc explain oc explain route --api-version route.openshift.io/v1</strong></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_openshift_web_console"><a class="anchor" href="#_using_the_openshift_web_console"></a>Using the OpenShift Web Console</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WIP</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
These screen shots need update at Red Hat OpenStack on OpenShift GA to match the required Red Hat OpenShift release.
</td>
</tr>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="s2-components-quiz-answers.html">Answers to the Quiz</a></span>
  <span class="next"><a href="s4-tasks-quiz.html">Quiz: OpenStack Administrator Tasks and Tools</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
